<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin Dashboard | UniVerse</title>
  <style>
    @import url("https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Orbitron:wght@400;700&display=swap");
    :root{
      --dark-bg:#050818;--dark-card:#11162b;--primary-blue:#00b4ff;--accent-violet:#b832ff;
      --text-light:#e0e7ff;--subtle:#9aa3d8;
    }
    body{margin:0;font-family:Montserrat,sans-serif;background:radial-gradient(circle at top,#1b1f3b 0%,#050818 50%,#020312 100%);color:var(--text-light);min-height:100vh;}
    .navbar{background:rgba(17,22,43,.85);border-bottom:1px solid rgba(184,50,255,.4);padding:18px 40px;display:flex;justify-content:space-between;align-items:center;backdrop-filter:blur(6px);position:sticky;top:0}
    .logo{font-family:Orbitron,sans-serif;font-size:2em;font-weight:700;background:linear-gradient(45deg,var(--primary-blue),var(--accent-violet));-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-shadow:0 0 15px var(--accent-violet),0 0 25px var(--primary-blue)}
    .btn{background:linear-gradient(90deg,var(--primary-blue),var(--accent-violet));color:#fff;border:0;border-radius:10px;padding:10px 18px;font-weight:700;cursor:pointer}
    .btn:hover{transform:translateY(-2px)}
    .container{max-width:1100px;margin:40px auto;padding:0 25px}
    h1{font-family:Orbitron,sans-serif;text-shadow:0 0 12px rgba(0,180,255,.6);display:flex;justify-content:space-between;align-items:center}
    .section{margin-top:18px;background:rgba(17,22,43,.65);border:1px solid rgba(184,50,255,.35);border-radius:14px;padding:18px 22px;box-shadow:0 10px 35px rgba(0,0,0,.45);backdrop-filter:blur(5px)}
    .event{background:var(--dark-card);border:1px solid rgba(0,180,255,.35);border-radius:12px;padding:14px;margin:12px 0}
    .meta{color:var(--subtle);font-size:.95em}
    .row{display:flex;gap:10px;margin-top:10px}
    .danger{background:rgba(255,80,80,.25);border:1px solid rgba(255,80,80,.35)}
  </style>
</head>
<body>
  <nav class="navbar">
    <div class="logo">UniVerse Admin</div>
    <form action="/api/logout" method="get">
      <button class="btn" type="submit">Logout</button>
    </form>
  </nav>

  <div class="container">
    <h1>
      <span>Admin Control Panel</span>
      <button class="btn" onclick="window.location.href='/api/admin/events/create'">+ Add Event</button>
    </h1>

    <div class="section">
      <h2 style="margin:0 0 10px;">All Events (Auto-Approved)</h2>

      <% if (!events || events.length === 0) { %>
        <p class="meta">No events yet.</p>
      <% } else { %>
        <% events.forEach(ev => { %>
          <div class="event">
            <div style="font-weight:700;font-size:1.05em;"><%= ev.title %></div>
            <div class="meta"><%= ev.location %> • <%= ev.category %></div>
            <div class="meta">
              <%= new Date(ev.startTime).toLocaleString() %>
              <% if (ev.endTime) { %>
                → <%= new Date(ev.endTime).toLocaleString() %>
              <% } %>
            </div>

            <div class="row">
              <form action="/api/admin/events/<%= ev._id %>/delete" method="post">
                <button class="btn danger" type="submit">Delete</button>
              </form>
            </div>
          </div>
        <% }) %>
      <% } %>
    </div>
  </div>
</body>
</html>
